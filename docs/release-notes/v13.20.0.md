# v13.20.0 - Documentation Overhaul & Derived Value System

**Release Date**: February 2026

## Major Features

### üßÆ Derived Max Power/Resolve System

A new flexible system for calculating maximum Power and Resolve values using customizable formulas.

**Formula-Based Calculation**

- **Max Power Formula**: Default `"5 + @will.total + @fort.total"` - Calculate maximum power based on Will and Fortitude
- **Max Resolve Formula**: Default `"100 + (10 * @fort.total)"` - Calculate maximum resolve based on Fortitude
- **Minimum Values**: Enforce minimum values (Power: 1, Resolve: 10) to prevent invalid states
- **Empty String Support**: Leave formulas blank to disable derivation and use manual values

**Three-Tier Priority System**

1. **Per-Character Override**: Override abilities on individual characters take precedence
2. **Formula Derivation**: Apply formula calculation when no override exists
3. **Keep Existing Value**: Fall back to current value if neither override nor formula applies

**New Actor Abilities**

- `powerOverride`: Override maximum power value (Settings Effects only)
- `resolveOverride`: Override maximum resolve value (Settings Effects only)
- `powerMult`: Percentage multiplier for power adjustments
- `resolveMult`: Percentage multiplier for resolve adjustments

**Automatic Refresh**

- All actors automatically refresh their power/resolve values when formulas change
- No manual intervention required after settings updates

### ‚öôÔ∏è New Settings

**Derived Value Settings**

| Setting | Default | Description |
| ------- | ------- | ----------- |
| `maxPowerFormula` | `"5 + @will.total + @fort.total"` | Formula for calculating max power |
| `maxResolveFormula` | `"100 + (10 * @fort.total)"` | Formula for calculating max resolve |
| `minimumPowerValue` | `1` | Minimum allowed max power value |
| `minimumResolveValue` | `10` | Minimum allowed max resolve value |

**Performance Setting**

| Setting | Default | Description |
| ------- | ------- | ----------- |
| `actionCardExecutionLimit` | `30` | Maximum dice rolls per action card execution |

### üé≠ Enhanced Character Effects System

**Categorized Effects**

Effects are now organized into three distinct categories:

1. **Regular Effects**: Standard modifications visible to all players
2. **Hidden Effects**: GM-only controls with read-only player view
3. **Override Effects**: Special handling for power/resolve override keys

**Settings Effects Section**

- New dedicated section for override abilities
- GM sees full controls for all effect types
- Players see read-only view with "Hidden from Players" notice for hidden effects
- Count badges in section headers for quick reference

**UI Improvements**

- Actor sheet primary resources no longer have disabled fields when settings allow changes
- Enhanced character effects template with categorized sections
- Improved item sheet and embedded item mixins

### üìö Comprehensive Documentation Overhaul

**8 New Documentation Files**

**ERPS Ruleset**

- [`erps-ruleset-character-creation.md`](../erps-ruleset/erps-ruleset-character-creation.md) - Complete Level 1 character creation reference
- [`erps-ruleset-combat.md`](../erps-ruleset/erps-ruleset-combat.md) - Core combat mechanics and action economy

**For GMs**

- [`combat-adjudication-guide.md`](../for-gms/combat-adjudication-guide.md) - Comprehensive GM combat guide (435 lines)
- [`modern-flow.md`](../for-gms/modern-flow.md) - Action card focused workflow guide

**For Players**

- [`character-examples.md`](../for-players/character-examples.md) - Complete character sheets (1,021 lines)

**System Features**

- [`action-economy.md`](../system-features/action-economy.md) - Detailed action types guide
- [`cleanse-actions.md`](../system-features/cleanse-actions.md) - Status effect defense mechanics
- [`prepared-actions.md`](../system-features/prepared-actions.md) - Interrupt action system (456 lines)

**19 Updated Documentation Files**

- [`WHATS_NEW.md`](../WHATS_NEW.md)
- [`advanced-usage/action-cards.md`](../advanced-usage/action-cards.md)
- [`advanced-usage/applicationv2-window-sizing-fix-standalone.md`](../advanced-usage/applicationv2-window-sizing-fix-standalone.md)
- [`advanced-usage/applicationv2-window-sizing-fix.md`](../advanced-usage/applicationv2-window-sizing-fix.md)
- [`advanced-usage/developer-guide.md`](../advanced-usage/developer-guide.md)
- [`advanced-usage/editing-embedded-data.md`](../advanced-usage/editing-embedded-data.md)
- [`for-gms/README.md`](../for-gms/README.md)
- [`for-players/README.md`](../for-players/README.md)
- [`for-players/character-creation.md`](../for-players/character-creation.md)
- [`getting-started/installation.md`](../getting-started/installation.md)
- [`getting-started/quick-start.md`](../getting-started/quick-start.md)
- [`release-notes/v13.17.0.md`](v13.17.0.md)
- [`release-notes/v13.18.0.md`](v13.18.0.md)
- [`release-notes/v13.18.1.md`](v13.18.1.md)
- [`release-notes/v13.19.0.md`](v13.19.0.md)
- [`release-notes/v13.19.1.md`](v13.19.1.md)
- [`system-features/combat.md`](../system-features/combat.md)
- [`system-features/features.md`](../system-features/features.md)
- [`system-features/status-effects.md`](../system-features/status-effects.md)

## Getting Started

### For Players

**New Character Creation Resources**

- Check out the [`ERPS Character Creation Ruleset`](../erps-ruleset/erps-ruleset-character-creation.md) for step-by-step guidance
- Review [`Character Examples`](../for-players/character-examples.md) for complete, ready-to-use character sheets
- Learn about the [`Action Economy`](../system-features/action-economy.md) to understand your options in combat

**Understanding Power and Resolve**

- Power and Resolve are now calculated using formulas by default
- You can override these values on individual characters using Settings Effects
- Percentage multipliers allow for fine-tuned adjustments
- See the [`Character Creation Guide`](../for-players/character-creation.md) for more details

### For Game Masters

**New GM Resources**

- Read the [`Combat Adjudication Guide`](../for-gms/combat-adjudication-guide.md) for comprehensive combat management
- Try the [`Modern Flow`](../for-gms/modern-flow.md) approach for streamlined action card usage
- Review the [`ERPS Combat Ruleset`](../erps-ruleset/erps-ruleset-combat.md) for core mechanics

**Configuring Derived Values**

- Access System Settings to customize Power and Resolve formulas
- Use `@will.total` and `@fort.total` tokens in formulas
- Set minimum values to prevent edge cases
- Leave formulas blank to disable derivation for manual control

**Managing Character Effects**

- Effects are now categorized for easier management
- Hidden effects allow you to apply secret modifiers
- Override effects provide direct control over power/resolve values
- See the [`Status Effects Guide`](../system-features/status-effects.md) for details

## Documentation Changes

**Statistics**

- 27 documentation files changed
- 8 new files created
- 19 files updated
- 2,758 lines added, 45 lines removed

**New Documentation Areas**

- Complete ERPS ruleset documentation
- Comprehensive GM guides for combat and workflow
- Detailed player character examples
- In-depth system feature documentation

**Improved Cross-References**

- Better linking between related topics
- Updated navigation throughout the documentation
- Consistent formatting and structure

## Breaking Changes

**None.** All changes are backward compatible:

- Existing actors retain their current values unless formulas override them
- Empty strings in new settings disable derivation (existing behavior)
- New documentation doesn't deprecate existing documentation
- No data migration required

## Migration Requirements

**None.** No migration scripts are required. The system automatically handles:

- Existing actor data remains unchanged
- New settings have sensible defaults matching typical ERPS rules
- Optional features (derived values) can be enabled by GMs as needed

## Technical Details

### Code Changes

- 36 files modified
- 739 insertions, 67 deletions
- New derived value calculation methods in [`base-actor.mjs`](../../module/data/base-actor.mjs)
- Enhanced character effects system in [`character-effects.mjs`](../../module/helpers/character-effects.mjs)
- Updated settings configuration in [`settings.mjs`](../../module/services/settings/settings.mjs)
- Comprehensive translation additions across multiple language files

### Commits

```git
dee03b3 Chore: update minor version due to new feature.
f25c578 Several character examples.
22e164f Chore: lint
cd97b51 Remove support for power or resolve manual mode: use new fields to support manual changing.
424add2 New fields: power override, resolve override, power% and resolve%
a1d5899 Updated settings to have validation and warnings for new fields.
4fd0840 Chore: translation keys for new abilities.
1b50d40 Chore: macros updated due to active development.
039efb9 Fixed markdown linting issues.
644b395 Further documentation of action economy presented in ERPS ruleset.
3a5e88d Documentation of transformation-specific changes to stats.
c942347 Prepared action initial documentation.
3955184 Updated erps ruleset to include useful GM info
5c2a756 Chore: update release script exclude lists.
85d5865 Updated actor sheet to not have disabled fields when settings allow for changes to max power / resolve.
dec5663 Ensure derviation happens only when settings is not blank. Updated initial values to fall in line with typical ERPS rules.
d9e1c07 Allow for empty strings in derivation formula for max power and resolve.
bda7a72 Added new translation keys for derived / manaual mode.
c81affe Bugfix: Added missing translation strings from settings.
4e423e8 Chore: macro updates due to active development.
fc91248 Chore: update ignore to not commit anything sensitive accidentally.
e2aa8cd Agent rules files for roo code.
ff893bd WIP: modern flow
dcae1dc Linting fix.
abe173e Core combat rules for the ERPS ruleset.
8729eb6 WIP: Add ERPS Character Creation Ruleset documentation
60f4901 Fixed linting errors in existing documentation.
abfe3da Added markdown linting for the docs folder.
```

## Documentation Links

### New Documentation

- [ERPS Character Creation Ruleset](../erps-ruleset/erps-ruleset-character-creation.md)
- [ERPS Combat Ruleset](../erps-ruleset/erps-ruleset-combat.md)
- [Combat Adjudication Guide](../for-gms/combat-adjudication-guide.md)
- [Modern Flow Guide](../for-gms/modern-flow.md)
- [Character Examples](../for-players/character-examples.md)
- [Action Economy Guide](../system-features/action-economy.md)
- [Cleanse Actions Guide](../system-features/cleanse-actions.md)
- [Prepared Actions Guide](../system-features/prepared-actions.md)

### Related Documentation

- [Character Creation](../for-players/character-creation.md)
- [Combat System](../system-features/combat.md)
- [Status Effects](../system-features/status-effects.md)
- [Action Cards](../advanced-usage/action-cards.md)
- [Developer Guide](../advanced-usage/developer-guide.md)

## Known Issues

None reported for this release.

## Upgrade Instructions

1. Update the system through Foundry VTT's module management
2. Review the new settings in System Settings ‚Üí Eventide RP System
3. Customize Power and Resolve formulas if desired (defaults work for most games)
4. Explore the new documentation resources
5. No migration required - existing data is preserved
